{
  "frontend/src/components/ProtectedRoute.tsx": "Of course. Here is a concise analysis of the script:\n\n### 1. Main Purpose and Functionality\nThe script defines a React component called `ProtectedRoute`. Its primary purpose is to act as a **route guard** in a web application using `react-router-dom`. It protects certain routes by checking if a user is authenticated. If the user is logged in, it renders the intended page (the `children` components); otherwise, it redirects them to the `/login` page.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`ProtectedRoute` (Component):** This is the main functional component. It accepts other React components as `children`. Its core logic decides whether to display these children or to perform a redirect.\n*   **`isAuthenticated()` (Helper Function):** This internal function contains the authentication logic. It checks the browser's `localStorage` for two items: `userType` and `accessToken`. It returns `true` only if both items exist, signifying that the user is considered logged in.\n\n### 3. Important Features or Capabilities\n*   **Authentication Check:** It uses `localStorage` to persist and verify the user's login status. This is a common client-side authentication strategy.\n*   **Declarative Redirection:** It uses the `<Navigate>` component from `react-router-dom` (v6+) for redirection. This is the modern, declarative way to handle routing changes within a React component.\n*   **History Management:** The `replace` prop on the `<Navigate>` component is used to replace the current entry in the browser's history. This prevents the user from clicking the \"back\" button to return to the protected route they were just redirected from, which is a good user experience practice.\n*   **Component Composition:** It is designed as a wrapper component, making it reusable and easy to apply to any route that needs protection (e.g., `<ProtectedRoute><Dashboard /></ProtectedRoute>`).",
  "frontend/AdminPage-with-Hooks-Example.tsx": "Of course. Here is a concise analysis of the provided script.\n\n### Summary of the Script\n\nThis script is a refactored version of a React `AdminPage` component, designed to serve as an administrative dashboard. Its primary goal is to demonstrate a modern, clean architecture by separating complex business logic from the UI using custom React hooks.\n\n#### 1. Main Purpose and Functionality\nThe script creates a tab-based admin panel with three sections:\n*   **Teacher Management:** For adding, editing, and deleting teacher profiles.\n*   **Review Management:** For viewing, filtering, and deleting user-submitted reviews.\n*   **User Management:** For managing user accounts and viewing user statistics.\n\nThe core purpose is to showcase how a large, monolithic component can be broken down into smaller, more maintainable, and reusable pieces.\n\n#### 2. Key Functions/Methods and Their Roles\nThe architecture is centered around custom React hooks that encapsulate specific domains of logic:\n*   **`useTeacherManagement`, `useReviewManagement`, `useUserManagement`:** These are the most important parts. Each hook manages the state, data fetching (e.g., `loadTeachers`), and event handlers (e.g., `handleTeacherSubmit`, `handleDeleteReview`) for its respective section.\n*   **`AdminPage` Component:** This is the main UI container. Its role is simplified to managing the active tab and orchestrating the custom hooks. It passes the state and functions from the hooks down to the relevant UI components.\n*   **`useSnackbar` Hook:** A utility hook that provides a centralized system for displaying global notification messages (alerts) to the user.\n*   **`...Tab` Components (e.g., `TeacherManagementTab`):** These are placeholder UI components that receive all their data and logic as props from their corresponding hook. Their sole responsibility is to render the user interface (tables, dialogs, forms).\n\n#### 3. Important Features or Capabilities\n*   **Separation of Concerns:** The script's most significant feature is the clean separation of business logic (in hooks) from the UI presentation (in components). As noted in the comments, this dramatically reduces the main component's size and complexity.\n*   **Modularity and Reusability:** The custom hooks are self-contained and can be easily tested independently or reused in other parts of the application.\n*   **Improved Maintainability:** By isolating logic, it becomes much easier to locate bugs, make changes, and understand the codebase.\n*   **Inter-hook Communication:** The script demonstrates a pattern for communication between hooks. For example, deleting a review (`reviewManagement`) triggers a refresh of the teacher data (`teacherManagement.loadTeachers`), handling data dependencies gracefully.",
  "frontend/src/utils/courseMapping.ts": "Of course. Here is a concise analysis of the script:\n\n### Summary of the Script\n\nThis script is a utility module in JavaScript/TypeScript designed to manage a static list of academic course names and their corresponding acronyms.\n\n**1. Main Purpose and Functionality**\nThe script's primary purpose is to act as a single source of truth for course information. It centralizes the mapping between short course codes (e.g., \"OOP\") and their full, descriptive names (e.g., \"Object-Oriented Programming\"), making this data consistently available throughout an application.\n\n**2. Key Functions/Methods and Their Roles**\n*   **`COURSE_MAPPING`**: A constant object that serves as a dictionary or key-value map. It is the core data structure that links each course code (key) to its full name (value).\n*   **`getCourseFullName(courseCode)`**: A helper function that takes a course code as an argument and returns the corresponding full name from `COURSE_MAPPING`. It includes a fallback: if the code is not found in the map, it returns the original code itself, preventing errors.\n*   **`COURSE_OPTIONS`**: A constant array of objects, specifically structured for use in user interface (UI) components like dropdown/select menus. Each object has a `value` (the course code) and a `label` (the full name), which is a common format for UI libraries.\n\n**3. Important Features or Capabilities**\n*   **Centralization:** All course data is defined in one place, making it easy to maintain and update.\n*   **Reusability:** The `export` keyword makes these constants and the function available for import and use in other parts of the application.\n*   **UI-Ready:** It provides a pre-formatted array (`COURSE_OPTIONS`) that can be directly used to populate UI elements, saving development time.\n*   **Robustness:** The `getCourseFullName` function gracefully handles unknown course codes, improving the stability of components that use it.",
  "frontend/src/index.tsx": "Of course. Here is a concise analysis of the provided script.\n\n### Summary of the React Script\n\nThis script serves as the main entry point for a React web application, responsible for initializing the application's environment, setting up core functionalities like routing and theming, and rendering the main `App` component to the DOM.\n\n#### 1. Main Purpose and Functionality\n\nThe primary purpose of this script is to **bootstrap the React application**. It configures the entire application's foundation by:\n*   Creating a root DOM element for React to manage.\n*   Wrapping the application in a routing context to enable navigation.\n*   Applying a highly customized visual theme using the Material-UI (MUI) library.\n*   Rendering the top-level `App` component, which contains the rest of the application's user interface and logic.\n\n#### 2. Key Functions/Methods and Their Roles\n\n*   `createTheme()`: A function from MUI used to define a custom theme object. This object specifies colors (`palette`), fonts (`typography`), component shapes (`shape`), and default styles for specific components (`components`).\n*   `ReactDOM.createRoot()`: The modern React API for creating the main render \"root\" for the application, attached to the `<div id=\"root\">` element in the HTML.\n*   `root.render()`: Renders the React component tree into the DOM. It includes `React.StrictMode` for development-time checks.\n*   `<BrowserRouter>`: A component from `react-router-dom` that wraps the application to enable client-side routing, allowing navigation between different views without full page reloads.\n*   `<ThemeProvider>`: An MUI component that provides the custom `theme` to all nested components, ensuring a consistent look and feel across the application.\n*   `<CssBaseline />`: An MUI component that applies a CSS reset to normalize styles across different browsers, providing a consistent starting point.\n\n#### 3. Important Features or Capabilities\n\n*   **Custom Theming:** The application has a well-defined and branded visual identity. It uses a specific primary color (`#263D6A`, noted as \"CDUT main color\") and a secondary accent color, along with custom typography and shape settings.\n*   **Component-Level Style Overrides:** The theme goes beyond basic colors by providing custom default styles for MUI components like `MuiButton` (e.g., no text capitalization) and `MuiCard` (e.g., custom border-radius and box-shadow), enforcing a unique design system.\n*   **Single-Page Application (SPA) Structure:** The use of `BrowserRouter` indicates this is a Single-Page Application, providing a faster and smoother user experience for navigation.\n*   **Modern React Implementation:** It utilizes the current React 18 `createRoot` API for rendering.",
  "frontend/src/App.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of the `App` Component\n\nThis script defines the main `App` component, which serves as the root of a React web application. It is responsible for the application's overall layout and client-side routing.\n\n**1. Main Purpose and Functionality**\nThe primary purpose is to structure the application and manage navigation. It sets up a consistent layout with a `Header`, a main content area, and a `Footer`. It uses `react-router-dom` to render different page components based on the current URL. A key function is to protect most of the application's pages, requiring users to log in before they can access them.\n\n**2. Key Functions/Methods and Their Roles**\n*   **`App` Component:** The main functional component that renders the entire application UI.\n*   **`useLocation()`:** A React Router hook used to get the current URL path. This is used to check if the user is on the `/login` page.\n*   **`<Routes>` and `<Route>`:** Components from `react-router-dom` that define the application's navigation rules. Each `<Route>` maps a URL `path` to a specific page `element`.\n*   **`<ProtectedRoute>`:** A custom component that acts as a gatekeeper. It wraps other page components to ensure the user is authenticated. If the user is not logged in, it will likely redirect them to the login page.\n\n**3. Important Features or Capabilities**\n*   **Protected Routes:** The most significant feature is that all routes except `/login` are wrapped in `<ProtectedRoute>`, enforcing an authentication requirement for the entire application.\n*   **Conditional Layout:** The `Header` and `Footer` are conditionally rendered, meaning they are hidden on the `/login` page to provide a focused authentication experience.\n*   **Centralized Routing:** It defines a clear and centralized routing structure for pages like Home, Teachers list, Teacher details, an \"Add Review\" page, and an Admin panel.\n*   **Dynamic Routing:** The path `/teachers/:id` indicates that the application can display dynamic content for specific items (e.g., a specific teacher's profile page).",
  "requirements.txt": "Based on the provided dependencies, here is a concise analysis of the likely project:\n\nThis is not a script, but a `requirements.txt` file listing the Python libraries needed for a project. The combination of these libraries strongly indicates an advanced web scraping or web automation application.\n\n### 1. Main Purpose and Functionality\nThe main purpose is to **build a robust and stealthy web scraper**. The application is designed to automatically fetch, parse, and extract data from websites. It is equipped to handle both simple, static pages and complex, dynamic websites that are protected by anti-bot measures.\n\n### 2. Key Libraries and Their Roles\n*   **requests**: Fetches static web content (HTML, JSON, etc.) by making simple HTTP requests. It's fast and efficient for sites that don't require JavaScript execution.\n*   **BeautifulSoup4** & **lxml**: Work together to parse the downloaded HTML/XML content. BeautifulSoup provides a simple interface to navigate and search the document, while `lxml` acts as a high-performance parser, making data extraction fast and reliable.\n*   **Selenium**: Automates a real web browser (like Chrome). This is essential for interacting with dynamic websites that rely on JavaScript to load content, and for emulating user actions like clicking buttons, filling forms, and scrolling.\n*   **undetected-chromedriver**: A specialized driver for Selenium that is patched to prevent detection by anti-bot services (like Cloudflare or Akamai). This is the key component for scraping protected websites.\n\n### 3. Important Features or Capabilities\n*   **Versatility**: Can scrape both simple static sites (using `requests`) and complex, JavaScript-heavy dynamic sites (using `Selenium`).\n*   **Stealth Scraping**: The use of `undetected-chromedriver` is a critical feature, enabling the scraper to bypass common bot-detection systems that would otherwise block automated access.\n*   **User Emulation**: Capable of performing complex browser interactions, such as logging into accounts, navigating through multiple pages, and handling interactive elements.\n*   **Efficient Parsing**: Combines the user-friendly `BeautifulSoup` API with the speed of the `lxml` parser for efficient data extraction from raw HTML.",
  "frontend/src/components/admin/AdminLayout.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of `AdminLayout` Component\n\nThis script defines a React component named `AdminLayout` which serves as a comprehensive admin dashboard for managing system data.\n\n**1. Main Purpose and Functionality**\nThe primary purpose of this component is to provide a centralized, tab-based interface for administrators. It allows for the management of three key areas of an application:\n*   **Teachers:** Managing teacher profiles.\n*   **Reviews:** Managing reviews, likely associated with teachers.\n*   **Users:** Managing general user accounts.\n\nThe component displays a header with summary statistics (total teachers, reviews, and users) and uses tabs to switch between the different management panels.\n\n**2. Key Functions/Methods and Their Roles**\n*   **`AdminLayout`:** The main React functional component that orchestrates the entire UI. It manages the state of the currently active tab and integrates the various management modules.\n*   **Custom Hooks (`use...Management`)**: The core logic is abstracted into custom hooks: `useTeacherManagement`, `useReviewManagement`, and `useUserManagement`. These hooks encapsulate the state and API logic (fetching, creating, deleting data) for their respective domains, returning the necessary data and functions.\n*   **`useEffect` Hooks**: These are used to control data fetching. One effect loads data for a specific tab only when it is selected (`[currentTab]`), improving performance. Another effect loads the default (teacher) data when the component first mounts (`[]`).\n*   **`useSnackbar` Hook**: A utility hook that manages the state for a global notification system (`Snackbar`), allowing any part of the application to easily show success or error messages to the user.\n\n**3. Important Features or Capabilities**\n*   **Modular Design:** The component follows a clean architecture by separating UI (`AdminLayout`), state/logic (custom hooks), and specific panel views (child components like `TeacherManagement`).\n*   **Tab-Based Navigation:** Uses Material-UI `Tabs` to create an intuitive and organized user experience for switching between different administrative tasks.\n*   **On-Demand Data Loading:** Data for each management section is loaded dynamically as the user navigates to the corresponding tab, which optimizes initial page load time.\n*   **Data Synchronization:** The system is designed to handle data dependencies. For example, deleting a review automatically triggers a refresh of the teacher data (`onReviewDeleted`), ensuring the UI stays consistent.\n*   **Dashboard Statistics:** The header provides an at-a-glance summary of key metrics, giving the admin a quick overview of the system's state.\n*   **Centralized User Feedback:** A global `Snackbar` provides consistent, non-intrusive notifications for all actions performed within the admin panel.",
  "frontend/src/components/Header.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of the `Header` Component\n\nThis script defines a responsive and dynamic `Header` component for a React web application called \"CDUT-OBU 评教系统\" (CDUT-OBU Evaluation System), built using Material-UI and React Router.\n\n---\n\n#### 1. Main Purpose and Functionality\nThe primary purpose of this component is to serve as the main navigation bar for the application. Its functionality changes based on the user's authentication status and role (admin or student).\n\n*   **Displays Branding:** Shows the application title and university logos (CDUT and OBU).\n*   **Provides Navigation:** Offers navigation links like \"Home\" and \"Teachers List\".\n*   **Manages User Session UI:**\n    *   If the user is logged out, it displays a \"Login\" button.\n    *   If the user is logged in, it shows their username and role in a styled chip, with a dropdown menu for logging out.\n*   **Role-Based Customization:** The UI adapts for an \"admin\" user by displaying an extra \"Admin Backend\" navigation link, a prominent red \"Admin Mode\" banner, and a distinct red color scheme.\n\n---\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`Header` (React Component):** The main functional component that renders the entire header UI.\n*   **`useEffect` Hook:** This is the core of the component's state management.\n    *   **Role:** To synchronize the header's user interface with the authentication state stored in the browser's `localStorage`.\n    *   **Mechanism:** On component mount, it reads user data from `localStorage`. It also sets up event listeners (`storage`, `userStatusChange`) to automatically update the UI in real-time if the login status changes in another browser tab or through other application events.\n*   **`handleUserMenuOpen()` / `handleUserMenuClose()`:** Event handlers that control the visibility of the user's dropdown menu (which contains the logout option).\n*   **`handleLogout()`:**\n    *   **Role:** To perform the user logout process.\n    *   **Actions:** Clears all user-related data from `localStorage`, updates the component's internal state to reflect the logout, dispatches a custom event (`userStatusChange`) to notify other parts of the app, and navigates the user to the homepage.\n\n---\n\n#### 3. Important Features or Capabilities\n*   **Role-Based UI:** The component provides a significantly different visual experience for administrators, including a unique color theme, a top banner, and additional navigation options. This immediately informs the admin of their elevated privileges.\n*   **Dynamic State Synchronization:** It is designed to be highly responsive to changes in authentication state. By listening to `storage` and custom events, it ensures the header is always up-to-date, even if the login/logout action happens in a different browser tab.\n*   **Clear Visual Feedback:** Uses styled Material-UI components (`Chip`, `Avatar`, highlighted buttons) to provide clear, intuitive feedback to the user about their status (logged in/out, role) and current location within the site (active navigation link is highlighted).\n*   **Responsive Layout:** The navigation links are designed to be hidden on smaller screens (`display: { xs: 'none', md: 'flex' }`), indicating it's part of a responsive design.",
  "frontend/src/components/Footer.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of the Script\n\nThis script defines a reusable **`Footer`** component for a React web application using the **Material-UI** library. The application is identified as a \"CDUT-OBU Teacher Evaluation System\".\n\n#### 1. Main Purpose and Functionality\nThe main purpose of this script is to create a standardized, responsive footer for the web application. It displays essential end-of-page information, including:\n*   The application's name and a brief description.\n*   A \"Quick Links\" section for easy navigation.\n*   Contact information (naming the partner institutions).\n*   A copyright notice.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`Footer` (React Functional Component):** This is the primary component defined in the script. Its role is to render the entire footer's UI structure and content using JSX.\n*   **`useTheme()`:** This is a hook from the Material-UI library. Its role is to access the application's global theme (colors, fonts, etc.). In this script, it is used to set the footer's background color to the theme's primary color (`theme.palette.primary.main`), ensuring a consistent look and feel with the rest of the application.\n\n#### 3. Important Features or Capabilities\n*   **Responsive Design:** It uses Material-UI's `Grid` component with properties like `xs={12}` and `md={6}`. This makes the footer layout automatically adapt to different screen sizes, stacking content vertically on small (mobile) screens and arranging it in columns on medium (desktop) screens.\n*   **Theming and Styling:** The component is styled using the `sx` prop and is integrated with a central theme via `useTheme()`. This allows for easy and consistent styling changes across the entire application.\n*   **Modularity:** As a self-contained React component, it can be easily imported and placed at the bottom of any page layout in the application, promoting code reuse and maintainability.",
  "frontend/src/types/index.ts": "This is a concise analysis of the provided TypeScript script.\n\n### 1. Main Purpose and Functionality\n\nThe script defines a comprehensive set of TypeScript types and interfaces for a **teacher review web application**. Its primary purpose is to act as a \"single source of truth\" for data structures, ensuring type safety and consistency across the application, especially between the frontend client and the backend API. It covers data models, API request/response formats, UI component states, and application-wide constants.\n\n### 2. Key Functions/Methods (Interfaces & Types) and Their Roles\n\nThe script does not contain executable functions but defines the following key data structures:\n\n*   **Core Data Models:**\n    *   `Teacher`: Represents a teacher's profile, including bio, subjects, and aggregated review statistics (e.g., `average_rating`).\n    *   `Review`: Defines the structure of a student's review for a teacher, including ratings, comments, tags, and helpfulness counts.\n    *   `User` / `UserProfile`: Describes a user of the system (either a 'student' or 'admin'), including their credentials and profile information.\n\n*   **API Interaction Types:**\n    *   `ApiResponse<T>`: A generic wrapper for paginated API list responses, containing the list of `results`, total `count`, and links for `next`/`previous` pages.\n    *   `...FormData` / `Create...Data` (e.g., `TeacherFormData`, `CreateReviewData`): Define the shape of data sent to the API when creating or updating records.\n    *   `...Params` / `...Filters` (e.g., `TeacherListParams`, `ReviewFilters`): Specify the available query parameters for API requests, enabling filtering, searching, and sorting of data.\n\n*   **UI and Component Types:**\n    *   `SnackbarState` & `DialogState`: Manage the state of common UI elements like notification pop-ups and modal dialogs.\n    *   `ListComponentProps<T>`: Defines props for a generic, reusable list component, handling loading/error states and data display.\n\n*   **Constants and Utility Types:**\n    *   `DEPARTMENTS`, `SUBJECTS`, `USER_TYPES`, `RATING_LABELS`: Read-only constants (`as const`) used to populate UI elements like dropdowns and to enforce data integrity.\n\n### 3. Important Features or Capabilities\n\nThe types defined in the script reveal several key features of the application:\n\n*   **Strongly-Typed API:** The detailed request and response types ensure that communication with the backend is type-safe, reducing bugs and improving developer experience.\n*   **Advanced Data Browsing:** The application supports pagination, full-text search, ordering, and sophisticated filtering for teachers, reviews, and users.\n*   **Comprehensive Review System:** Users can provide multi-faceted reviews with separate ratings for overall experience and difficulty, a \"would take again\" flag, and descriptive tags.\n*   **Role-Based User Management:** The system distinguishes between `student` and `admin` users, implying different permissions and capabilities for each role.\n*   **Modular and Reusable Frontend:** The presence of types for UI state and generic component props suggests the application is built with a modern frontend framework (like React or Vue) using a component-based architecture.",
  "frontend/src/components/admin/teachers/TeacherList.tsx": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\nThe script defines a React component named `TeacherList` that is responsible for displaying a list of teachers in a structured table. If the list of teachers is empty, it displays a user-friendly \"empty state\" message with a call to action. Otherwise, it renders a table with detailed information for each teacher, including action buttons to edit or delete them.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`TeacherList` (React Component):** The main functional component that receives a `teachers` array and two callback functions (`onEdit`, `onDelete`) as props. It uses this data to render the entire UI.\n*   **`onEdit` (Callback Prop):** A function passed from a parent component. It is triggered when a user clicks the \"Edit\" icon, passing the corresponding `teacher` object back to the parent to handle the editing logic.\n*   **`onDelete` (Callback Prop):** A function passed from a parent component. It is triggered when a user clicks the \"Delete\" icon, passing the teacher's `id` and `name` back to the parent to handle the deletion logic.\n*   **`.map()`:** A standard JavaScript method used within the component to iterate over the `teachers` array and generate a table row (`<TableRow>`) for each teacher entry.\n\n### 3. Important Features or Capabilities\n*   **Interactive Actions:** Provides \"Edit\" and \"Delete\" buttons for each teacher record, allowing for data management. Tooltips are included to clarify button functions.\n*   **Conditional Rendering:** Intelligently displays either the data table or an \"empty state\" message depending on whether the `teachers` array contains data.\n*   **Rich UI Display:** Uses the Material-UI library to create a polished and professional-looking table. It displays not just text but also `Avatar` for images, `Chip` components for subjects, and styled text for ratings.\n*   **Smart Data Truncation:** To maintain a clean layout, it only displays the first three subjects and uses a `+N` chip to indicate if there are more.\n*   **Reusable Component:** It's designed as a presentational component that is decoupled from business logic, making it easy to reuse elsewhere in the application.",
  "frontend/src/components/admin/teachers/TeacherDialog.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### 1. Main Purpose and Functionality\nThe script defines a React component named `TeacherDialog`, which serves as a modal dialog form for creating a new teacher or editing an existing one. Built with Material-UI, it provides a structured and user-friendly interface for inputting and modifying a teacher's information, such as their name, department, taught courses, biography, and avatar. The component's behavior dynamically adapts based on whether it is in \"create\" or \"edit\" mode.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`TeacherDialog` (Component):** The main functional component that renders the entire dialog. It is a \"controlled component,\" meaning it receives its data and state-management functions (callbacks) as props from a parent component.\n*   **`onClose`, `onInputChange`, `onImageChange`, `onSubmit` (Props):** These are callback functions passed from a parent component. They handle closing the dialog, updating form data in the parent's state, managing image file selection, and triggering the final data submission, respectively.\n*   **`handleCourseChange`:** An internal handler for the multi-select \"Taught Courses\" dropdown. It converts the array of selected courses into a comma-separated string before passing it to the `onInputChange` prop.\n*   **`handleDeleteCourse`:** An internal handler that allows users to remove a selected course by clicking the \"x\" on its chip. It updates the course list and calls `onInputChange`.\n\n### 3. Important Features or Capabilities\n*   **Dual Mode Operation:** The dialog's title and submit button text change dynamically (e.g., \"Add New Teacher\" vs. \"Edit Teacher Info\") depending on whether the `editingTeacher` prop is provided.\n*   **Rich Multi-Select for Courses:** It features an advanced course selection input that displays selected items as `Chip` components. It also shows a separate list of selected courses that can be individually removed.\n*   **Image Upload and Preview:** Includes functionality to upload a teacher's avatar. It shows the name of the newly selected file or displays the current avatar if one already exists for an editing teacher.\n*   **Controlled Form State:** The component does not manage its own state for form data. This makes it highly reusable and centralizes state logic in a parent component, which is a common and robust pattern in React.\n*   **Basic Validation:** Implements simple client-side validation, such as ensuring the teacher's name field is not empty.",
  "frontend/src/components/admin/teachers/TeacherStats.tsx": "Of course. Here is a concise analysis of the provided React script:\n\n### 1. Main Purpose and Functionality\nThe script defines a React component named `TeacherStats`. Its primary purpose is to function as a dashboard widget that calculates and displays key statistics derived from a list of teacher data. It takes an array of `teacher` objects as input and presents three aggregated metrics: the total number of teachers, the total number of reviews, and the overall average rating.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`TeacherStats` (React Functional Component):** This is the main component. It receives a `teachers` array as a prop, performs calculations, and renders the statistical display.\n*   **Internal Calculations:**\n    *   `teachers.length`: Calculates the total number of teachers.\n    *   `teachers.reduce()`: Used twice to efficiently compute aggregate data. First, to sum up the `total_reviews` from all teachers, and second, to sum up their `average_rating`.\n*   **`statsConfig.map()`:** This is the core of the rendering logic. Instead of hardcoding each stat card, the component iterates over a configuration array (`statsConfig`). This array defines the title, calculated value, icon, and colors for each card, making the code clean and easy to extend.\n\n### 3. Important Features or Capabilities\n*   **Data-Driven UI:** The component's output is entirely determined by the `teachers` prop it receives, making it dynamic and reusable.\n*   **Visual Clarity:** It uses the Material-UI library to create a professional, card-based layout. Each statistic is clearly distinguished by a unique icon (`SchoolIcon`, `ReviewIcon`, `StarIcon`) and color scheme.\n*   **Maintainable Design:** The use of a `statsConfig` array is a key feature. To add or remove a statistic, a developer only needs to modify this array, not the JSX rendering logic.\n*   **User Experience (UX):** The cards include a subtle hover animation (a lift and shadow effect), providing visual feedback and enhancing the user's interactive experience.\n*   **Robustness:** The average rating calculation includes a check to prevent division-by-zero errors if the input `teachers` array is empty.",
  "frontend/src/components/admin/users/UserList.tsx": "Based on the analysis of the provided React script, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThe script defines a reusable React component named `UserList`. Its primary purpose is to render a list of user objects into a styled, interactive table using the Material-UI (MUI) library. It is a \"presentational\" component, meaning it receives data and event handlers via props and is responsible only for displaying the UI. If the user list is empty, it displays a message prompting the user to add data.\n\n### 2. Key Functions/Methods and Their Roles\nThe component's interactivity is managed through callback functions passed as props from a parent component:\n*   **`UserList` (React Component):** The main function that renders the table UI. It maps over the `users` array to create a row for each user.\n*   **`onEdit(user)`:** A prop function that is called when a user clicks the \"Edit\" icon. It passes the full `user` object to the parent component to handle the editing logic.\n*   **`onDelete(userId, username)`:** A prop function called when the \"Delete\" icon is clicked. It passes the user's ID and username to the parent to initiate a deletion process.\n*   **`onTogglePassword(userId)`:** A prop function called when the password visibility icon is clicked. It signals to the parent component to toggle the display state of a specific user's password.\n\n### 3. Important Features or Capabilities\n*   **Dynamic Data Display:** Renders user information in table columns, including username, name, email, user type, status, and registration date.\n*   **Conditional Rendering:**\n    *   Displays a user-friendly \"empty state\" message when no users are provided.\n    *   Uses colored `Chip` components and icons to visually distinguish between user types ('admin' vs. 'student') and status ('active' vs. 'disabled').\n*   **Interactive Actions:** Provides \"Edit\" and \"Delete\" icon buttons for each user, with tooltips explaining their function.\n*   **Password Visibility Toggle:** A key feature that allows the user to show or hide passwords (which are masked by default) for each entry in the list by clicking an icon.\n*   **Styling and UX:** Leverages Material-UI for a polished and professional appearance, including hover effects on table rows and clear iconography. The date formatting and UI text are localized to Chinese.",
  "frontend/src/components/admin/users/UserManagement.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of `UserManagement` Component\n\nThis script defines a React component for a user management interface, built with the Material-UI (MUI) library. It acts as a \"view\" or \"container\" component that assembles several smaller, specialized child components to create a complete user administration panel.\n\n#### 1. Main Purpose and Functionality\nThe component's main purpose is to provide a user-friendly interface for administrators to perform **CRUD (Create, Read, Update, Delete)** operations on users. It displays a list of users, shows key statistics, and allows for adding, editing, deleting, and filtering users through a clean, card-based layout.\n\n#### 2. Key Functions/Methods and Their Roles\nThe component's logic is almost entirely managed by a custom hook, `useUserManagement`. The component itself receives state and handler functions as props from this hook. Key prop functions include:\n\n*   **`handleOpenUserDialog` / `handleCloseUserDialog`**: Manages the visibility of the modal dialog for adding or editing a user.\n*   **`handleUserSubmit`**: Handles the form submission to create a new user or update an existing one.\n*   **`handleUserDelete`**: Triggers the deletion of a specific user.\n*   **`handleUserFilterChange` / `applyUserFilters`**: Manages the state of the filter inputs and applies the filters to the user list.\n*   **`togglePasswordVisibility`**: Toggles the visibility of user passwords in the list.\n\n#### 3. Important Features or Capabilities\n*   **Component-Based Architecture**: It is composed of distinct child components (`UserStats`, `UserFilters`, `UserList`, `UserDialog`), making the code modular and maintainable.\n*   **Logic Abstraction**: All business logic, state, and API calls are encapsulated within the `useUserManagement` hook, separating concerns from the UI.\n*   **User Feedback**: It displays a loading spinner (`CircularProgress`) while user data is being fetched, providing clear feedback to the user.\n*   **Filtering**: Includes a dedicated filtering section to allow administrators to easily find specific users.\n*   **Responsive Design**: Features a Floating Action Button (FAB) for adding users, which is only visible on smaller screens (mobile-friendly).",
  "frontend/src/components/admin/users/UserFilters.tsx": "Of course. Here is a concise analysis of the provided script.\n\n### Summary of `UserFiltersComponent`\n\nThis script defines a reusable React component for filtering a list of users. It is built using TypeScript and the Material-UI library.\n\n**1. Main Purpose and Functionality**\nThe component's primary purpose is to render a set of UI controls that allow a user to filter a user list. It provides two filtering options:\n*   A dropdown to filter by **User Type** (All, Student, Admin).\n*   A text input field for a free-text **Search** (by username or email).\n\nIt also includes a \"Search\" button to apply the selected filters.\n\n**2. Key Functions/Methods and Their Roles**\nThe component is a \"controlled component,\" meaning it receives its state and behavior from a parent component via props.\n\n*   **`UserFiltersComponent` (The component itself):** Renders the filter UI based on the `filters` prop it receives.\n*   **`onFilterChange` (prop):** A callback function that is invoked whenever the value of a filter input changes. It passes the name of the changed field (`'user_type'` or `'search'`) and its new value back to the parent component.\n*   **`onApply` (prop):** A callback function that is triggered when the user clicks the \"Search\" button. It signals the parent component to execute the filtering logic with the current filter state.\n\n**3. Important Features or Capabilities**\n*   **Controlled Component:** The component is stateless and relies on a parent to manage the filter state, making it predictable and easy to integrate.\n*   **Material-UI Integration:** It uses components from the Material-UI library (`Grid`, `Select`, `TextField`, `Button`) for a consistent and modern UI.\n*   **Responsive Layout:** It utilizes MUI's `Grid` system to create a responsive layout that adapts to different screen sizes (e.g., stacking controls vertically on small screens).\n*   **Type Safety:** The use of TypeScript with interfaces (`UserFiltersProps`, `UserFilters`) ensures that the component receives the correct props, reducing potential runtime errors.",
  "frontend/src/components/admin/teachers/TeacherManagement.tsx": "Based on the script analysis, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThis is a high-level React component designed to serve as a complete user interface for **Teacher Management**. It orchestrates the display and interaction for viewing a list of teachers, adding new ones, editing existing ones, and deleting them (full CRUD functionality). It acts as a container that assembles several smaller, specialized child components to build the final UI.\n\n### 2. Key Functions/Methods and Their Roles\nThe component's logic is largely passed in as props from a custom hook (`useTeacherManagement`). Key \"functions\" are either these props or the child components it renders:\n\n*   **Handler Props:**\n    *   `handleOpenTeacherDialog`: Opens a pop-up modal to add or edit a teacher.\n    *   `handleCloseTeacherDialog`: Closes the modal.\n    *   `handleTeacherSubmit`: Submits the form data to create or update a teacher.\n    *   `handleTeacherDelete`: Deletes a specified teacher.\n    *   `handleTeacherInputChange` / `handleImageChange`: Manage form state changes within the dialog.\n*   **Child Components:**\n    *   `TeacherStats`: Displays statistical information about the teachers (e.g., total count).\n    *   `TeacherList`: Renders the list of individual teachers and includes buttons to trigger edit and delete actions.\n    *   `TeacherDialog`: A modal form used for both creating and editing teacher details.\n\n### 3. Important Features or Capabilities\n*   **Component-Based Architecture:** The UI is cleanly separated into distinct components (`TeacherStats`, `TeacherList`, `TeacherDialog`), promoting reusability and maintainability.\n*   **Logic Abstraction:** All state management and business logic (like API calls and state updates) are abstracted into the `useTeacherManagement` custom hook. This makes the UI component purely presentational and easier to understand.\n*   **Loading State Handling:** It provides a good user experience by displaying a circular progress indicator (spinner) while the teacher data is being fetched.\n*   **Responsive Design:** It includes a Floating Action Button (FAB) for adding teachers that is only visible on small screens (mobile-friendly), ensuring a good user experience across different devices.\n*   **Material-UI Integration:** The component is built using the Material-UI library, giving it a modern and consistent design with pre-built components like `Card`, `Button`, and `Dialog`.",
  "frontend/src/components/admin/users/UserStats.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of UserStatsComponent\n\nThis script defines a reusable React component named `UserStatsComponent` for displaying a summary of user statistics on a dashboard.\n\n#### 1. Main Purpose and Functionality\nThe component's primary purpose is to render a set of four visually distinct cards, each representing a key user metric: total users, student users, administrators, and active users. It takes a `userStats` data object as input and displays nothing if the data is not available, ensuring graceful handling of loading or error states.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`UserStatsComponent` (React Functional Component):** The main component that receives `userStats` data via props. It contains all the logic for rendering the UI.\n*   **`statsConfig` (Array):** A configuration array that acts as a blueprint for the statistic cards. It declaratively defines the title, icon, color, and data value for each card. This makes the component easy to read, manage, and extend.\n*   **`.map()` method:** Used within the JSX to iterate over the `statsConfig` array, dynamically generating a styled `Card` for each statistic. This avoids repetitive code and makes the component data-driven.\n\n#### 3. Important Features or Capabilities\n*   **Data-Driven:** The component is entirely driven by the `userStats` prop, making it dynamic and reusable.\n*   **Responsive Design:** It uses Material-UI's `Grid` system (`xs={12} md={3}`), ensuring the cards stack vertically on small screens and align horizontally on larger screens.\n*   **Rich UI/UX:** It leverages Material-UI components (`Card`, `Icon`) and theming (`color`, `bgcolor`) to create a modern, visually appealing display. It also includes a subtle hover animation for enhanced user interaction.\n*   **Type-Safe:** Built with TypeScript, it uses the `UserStatsProps` interface to enforce the correct data structure, reducing the likelihood of runtime errors.",
  "frontend/src/components/admin/reviews/ReviewDialog.tsx": "Of course. Here is a concise analysis of the provided script.\n\n### Summary of `ReviewDialog` Component\n\n#### 1. Main Purpose and Functionality\nThe script defines a React component named `ReviewDialog` using TypeScript and the Material-UI library. Its primary purpose is to display the detailed information of a single course/teacher review in a modal dialog box. The component is purely presentational; it receives data and state (e.g., whether it's open) via props and renders the UI accordingly.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`ReviewDialog` (Functional Component):** The main component that accepts `open`, `review`, and `onClose` as props. It renders a Material-UI `<Dialog>` and is responsible for structuring and displaying all the details from the `review` object.\n*   **`onClose` (Prop):** A callback function passed from a parent component. It is triggered when the user clicks the \"Close\" button or the dialog's backdrop, signaling the parent to close the dialog.\n*   **`getCourseFullName` (Imported Utility):** An external helper function used to format and display the full name of a course based on the data in `review.course`.\n*   **Inline IIFE (Immediately Invoked Function Expression):** A self-executing anonymous function is used to process and render the `tags`. This logic is self-contained and handles cases where tags are either an array or a comma-separated string.\n\n#### 3. Important Features or Capabilities\n*   **Comprehensive Data Display:** It presents a detailed breakdown of a review, including teacher/student info, star ratings for overall experience and difficulty, a \"would take again\" indicator, course name, date, tags, and the full review content.\n*   **Data Robustness:** The component is designed to handle variations in the incoming `review` data. For example:\n    *   It gracefully looks for the teacher's name in multiple possible locations within the `review` object.\n    *   It displays \"匿名用户\" (Anonymous User) if a student name is not provided.\n    *   It can parse tags whether they are supplied as a string or an array.\n*   **Responsive Layout:** It uses Material-UI's `<Grid>` system, allowing the layout to adapt from a multi-column view on larger screens to a single-column view on smaller devices.\n*   **Clear Visual Presentation:** It effectively uses UI elements like `<Rating>` for star visualization, colored `<Chip>` components for boolean states (e.g., 'willing'/'unwilling'), and `<Paper>` to visually distinguish the main review text.",
  "frontend/src/components/admin/users/UserDialog.tsx": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\nThe script defines a React component named `UserDialog` using the Material-UI (MUI) library. Its primary purpose is to serve as a modal dialog (popup) for creating a new user or editing an existing user's information. The dialog functions as a form, collecting details such as username, password, personal information, user type, and account status.\n\n### 2. Key Functions/Methods and Their Roles\nThe component is a \"controlled component,\" meaning its state and logic are managed by a parent component through props:\n\n*   **`UserDialog` (Component):** The main functional component that renders the entire dialog UI based on the props it receives. It does not manage its own state.\n*   **`onClose` (Prop):** A callback function that is triggered when the user wants to close the dialog (e.g., by clicking the \"Cancel\" button or the backdrop). It signals the parent to hide the dialog.\n*   **`onInputChange` (Prop):** A callback function invoked whenever a user modifies a form field. It passes the field name and its new value back to the parent component to update the form's state.\n*   **`onSubmit` (Prop):** A callback function executed when the user clicks the \"Create User\" or \"Update User\" button. It triggers the data submission logic, which is handled by the parent component.\n\n### 3. Important Features or Capabilities\n*   **Dual-Mode Operation:** The component dynamically adapts its UI for two modes: \"add new user\" and \"edit existing user.\" It changes titles, button labels, and field properties based on whether an `editingUser` object is provided.\n*   **Conditional Form Logic:** The form has intelligent behavior:\n    *   The `username` field is disabled when editing a user.\n    *   The `password` field is optional for updates but required for new users.\n    *   The `student_id` field is disabled for 'admin' user types.\n*   **User Role and Status Management:** It allows for setting a user's role (e.g., 'admin', 'student') and account status ('active', 'disabled') through dropdown selectors.\n*   **Basic Client-Side Validation:** The submit button is disabled if required fields (like `username` and `password` for new users) are empty, preventing incomplete submissions.\n*   **Rich User Interface:** It leverages various MUI components like `Alert`, icons, and styled layouts to provide a clear, user-friendly, and informative experience, including a section that explains the permissions for different user roles.",
  "frontend/src/components/admin/reviews/ReviewStats.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of the `ReviewStats` Component\n\nThis script defines a React functional component named `ReviewStats` that displays a dashboard of key statistics derived from a list of reviews.\n\n**1. Main Purpose and Functionality**\nThe component's primary purpose is to receive an array of `review` objects and render a high-level statistical summary. It calculates four key metrics from the data and presents them in a clean, responsive, card-based layout for easy visualization.\n\n**2. Key Functions/Methods and Their Roles**\nThe component's logic is self-contained and focuses on two main areas:\n\n*   **Data Calculation:** It performs several calculations on the input `reviews` array:\n    *   `totalReviews`: Counts the total number of reviews.\n    *   `averageRating`: Calculates the average `overall_rating` using `reduce`.\n    *   `lowRatingCount`: Counts reviews with a rating of 2 or less using `filter`.\n    *   `uniqueTeachers`: Determines the number of unique teachers mentioned in the reviews by using `map` and a `Set`.\n*   **Dynamic Rendering:** It uses a `statsConfig` array to define the properties (title, icon, color) for each statistic card. The component then maps over this array to dynamically render each card, making the UI easy to manage and extend.\n\n**3. Important Features or Capabilities**\n*   **Data-Driven:** The component is purely presentational; its entire output is determined by the `reviews` prop it receives.\n*   **Responsive Design:** It utilizes Material-UI's `Grid` system (`xs={12} md={3}`), ensuring the stat cards stack vertically on small screens and align horizontally on larger screens.\n*   **Rich UI:** It leverages the Material-UI library for styled components like `Card` and `Icon`, creating a visually appealing and professional look.\n*   **Interactive Feedback:** The cards include a subtle hover effect (shadow and transform) to provide users with visual feedback and improve the user experience.",
  "frontend/src/components/admin/reviews/ReviewList.tsx": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\nThe script defines a React component named `ReviewList` that is responsible for displaying a list of student reviews in a table format. Its primary function is to present a summary of each review—including the teacher, reviewer, content, rating, and course—and provide interactive controls for an administrator or moderator to view the full details or delete a review. If no reviews are provided, it displays a user-friendly message indicating that there is no data.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`ReviewList` (React Component):** This is the main component. It receives an array of `reviews` and two callback functions, `onView` and `onDelete`, as properties (props). It then maps over the `reviews` array to render a table row (`<TableRow>`) for each review.\n*   **`onView(review)` (Prop):** A callback function passed from a parent component. It is triggered when a user clicks the \"View\" icon. It passes the entire `review` object to the parent, which is expected to handle the logic for displaying the review's full details (e.g., in a modal).\n*   **`onDelete(reviewId, reviewTitle)` (Prop):** A callback function passed from a parent component. It is triggered when a user clicks the \"Delete\" icon. It passes the review's unique `id` and a truncated title to the parent, which is responsible for handling the deletion logic (e.g., showing a confirmation dialog).\n*   **`getCourseFullName(course)` (Imported Utility):** An external helper function used to convert a course identifier from the review data into a more readable, full course name for display.\n\n### 3. Important Features or Capabilities\n*   **Dynamic Data Display:** The component dynamically renders review data passed to it, making it reusable for any list of reviews.\n*   **Conditional Rendering:** It gracefully handles an empty state by displaying a \"No reviews\" message instead of an empty table.\n*   **Rich UI Components:** It leverages the Material-UI library to create a polished and informative UI, using components like `Rating` for star ratings, `Chip` for a tag-like course display, and `Tooltip` for icon button descriptions.\n*   **Interactive Actions:** It provides clear \"View\" and \"Delete\" actions for each review, enabling user interaction and data management.\n*   **User Experience (UX) Enhancements:** The component includes hover effects on table rows and buttons, and it truncates long review content with an ellipsis (...) to maintain a clean table layout.",
  "frontend/src/hooks/useReviewManagement.ts": "Of course. Here is a concise analysis of the script.\n\n### Summary of `useReviewManagement` Hook\n\nThis script defines a custom React hook, `useReviewManagement`, designed to encapsulate all the logic and state required for managing reviews in an administrative interface.\n\n#### 1. Main Purpose and Functionality\nThe primary purpose of this hook is to provide a reusable and self-contained unit for handling review-related operations. It manages fetching reviews from an API, applying filters, displaying individual review details, and deleting reviews, while also handling loading states and user feedback.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`loadReviews`**: An asynchronous function that fetches a list of reviews from the backend API. It uses the current `reviewFilters` state to query the data and manages the `reviewsLoading` state.\n*   **`handleDeleteReview`**: Prompts the user for confirmation before deleting a review via an API call. On success, it shows a notification, reloads the review list, and calls the optional `onReviewDeleted` callback.\n*   **`handleViewReview` / `handleCloseReviewDialog`**: A pair of functions that control a dialog for viewing the details of a specific review. They manage the `openReviewDialog` and `selectedReview` state.\n*   **`handleReviewFilterChange`**: Updates the state of the filter object (`reviewFilters`) as the user interacts with filter inputs.\n*   **`applyReviewFilters`**: Triggers the `loadReviews` function to refetch data based on the currently set filters.\n\n#### 3. Important Features or Capabilities\n*   **State Encapsulation**: Bundles all related state (`reviews`, `loading`, `filters`, dialog state) and logic into a single, clean hook.\n*   **API Abstraction**: Interacts with a dedicated `reviewsApi` service, separating UI logic from data-fetching concerns.\n*   **Filtering System**: Provides a complete client-side mechanism to build and apply filters for teacher, course, and minimum rating before sending the request to the API.\n*   **Parent Component Communication**: Utilizes props like `showSnackbar` for user feedback and an `onReviewDeleted` callback to notify the parent component of a change, allowing it to refresh related data (e.g., teacher statistics).",
  "frontend/src/hooks/useSnackbar.ts": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\nThis script defines a custom React hook named `useSnackbar`. Its purpose is to encapsulate and manage the state and logic for a UI snackbar (or \"toast\") notification component. It provides a simple, reusable interface for any component to show or hide a snackbar notification.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`useSnackbar()`**: The primary custom hook. It initializes the snackbar's state and returns an object containing the current state and functions to manipulate it.\n*   **`showSnackbar(message, severity?)`**: A function used to display the snackbar. It takes a `message` string and an optional `severity` ('success', 'error', etc.), then updates the state to make the snackbar visible with the provided content.\n*   **`hideSnackbar()`**: A function that hides the currently active snackbar by setting its `open` state to `false`.\n*   **`snackbar` (state object)**: The state variable that holds the snackbar's current properties: `open` (boolean), `message` (string), and `severity` (string). UI components use this object to render the snackbar correctly.\n\n### 3. Important Features or Capabilities\n*   **State Encapsulation**: The hook neatly bundles the snackbar's state logic, hiding the implementation details (`useState`) from the components that use it.\n*   **Reusable Logic**: As a custom hook, this logic can be easily imported and used across any component in an application, promoting clean and DRY (Don't Repeat Yourself) code.\n*   **Performance Optimization**: It uses `useCallback` to memoize the `showSnackbar` and `hideSnackbar` functions. This prevents them from being recreated on every render, which is beneficial for performance, especially when passed as props to child components.\n*   **Declarative API**: It provides a clean API to imperatively trigger actions (`showSnackbar`) that declaratively update the UI through React's state management system.",
  "frontend/src/hooks/index.ts": "Based on the analysis of the script, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThis script acts as a \"barrel file\" or a central index for a collection of custom React hooks. Its main purpose is to **aggregate and re-export** these hooks from their individual files. This allows other parts of the application to import multiple hooks from a single, convenient location, simplifying import statements and improving code organization.\n\n### 2. Key Functions/Methods and Their Roles\nThe script exports four key functions, which are custom React hooks (indicated by the `use` prefix):\n\n*   **`useTeacherManagement`**: Encapsulates the logic for managing \"teacher\" data. This likely includes fetching, creating, updating, and deleting teacher records (CRUD operations), as well as handling related state like loading and error statuses.\n*   **`useReviewManagement`**: Manages the logic related to \"reviews.\" It would handle fetching, submitting, and possibly moderating or deleting reviews.\n*   **`useUserManagement`**: Provides functionality for managing \"user\" data. This could involve fetching user lists, handling user creation, updating user roles or profiles, and deleting users.\n*   **`useSnackbar`**: A utility hook for managing UI notifications. It likely provides a simple way for components to trigger and display \"snackbar\" or \"toast\" messages (e.g., for success, error, or informational alerts) across the application.\n\n### 3. Important Features or Capabilities\n*   **Modularity**: The code promotes a modular architecture by keeping the logic for each hook in its own separate file.\n*   **Centralized Access**: It creates a single, unified entry point for all the management and utility hooks, making them easier to discover and use.\n*   **Separation of Concerns**: The script demonstrates a clear separation between data management logic (Teacher, Review, User) and UI utility logic (Snackbar).\n*   **Code Reusability**: As custom hooks, these functions are designed to encapsulate and reuse stateful logic across different components in a React application.",
  "frontend/src/hooks/useUserManagement.ts": "Of course. Here is a concise analysis of the provided script.\n\n### Summary of `useUserManagement` Hook\n\n#### 1. Main Purpose and Functionality\nThis script defines a React custom hook named `useUserManagement`. Its primary purpose is to encapsulate all the state and logic required for managing users in a web application. It provides a clean interface for a UI component to perform full CRUD (Create, Read, Update, Delete) operations on users, handle filtering, and manage related UI states like loading indicators and dialogs.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`loadUsers()`**: Fetches a list of users from the API, applying the current filters. It manages the loading state.\n*   **`loadUserStats()`**: Fetches aggregate statistics about users (e.g., total counts).\n*   **`handleUserSubmit()`**: Handles the creation of a new user or the update of an existing one. It performs basic validation, calls the appropriate API endpoint, provides user feedback via a snackbar, and reloads data upon success.\n*   **`handleUserDelete()`**: Deletes a specified user after a confirmation prompt, shows a notification, and reloads the user list.\n*   **`handleOpenUserDialog()` / `handleCloseUserDialog()`**: Manages the visibility of a modal or dialog used for creating or editing a user. `handleOpenUserDialog` also pre-populates the form when editing.\n*   **`handleUserFilterChange()` / `applyUserFilters()`**: Manages the state of search/filter inputs and triggers a data refetch when the filters are applied.\n\n#### 3. Important Features or Capabilities\n*   **Complete State Management**: The hook centralizes all user-related state, including the user list, loading status, form data, filters, and dialog visibility.\n*   **Full CRUD Operations**: Provides all necessary functions to create, read, update, and delete users through integration with a `usersApi` service.\n*   **Filtering and Searching**: Includes built-in functionality to filter the user list by user type and a general search term.\n*   **Robust Error Handling**: API calls are wrapped in `try...catch` blocks to handle errors gracefully, and it attempts to display specific error messages from the API response.\n*   **User Feedback**: It accepts a `showSnackbar` function as a prop, allowing it to provide clear success or error notifications to the user without being tied to a specific UI library.\n*   **Reusable Logic**: As a custom hook, it makes the user management logic reusable across different components, keeping them clean and focused on presentation.",
  "frontend/src/components/admin/reviews/ReviewFilters.tsx": "Based on the analysis of the script, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThis is a React UI component named `ReviewFiltersComponent` built using the Material-UI library. Its primary purpose is to provide a set of filter controls for a list of reviews. Users can filter reviews by teacher, course, and minimum rating, and then apply these selections to see a filtered result.\n\n### 2. Key Functions/Methods and Their Roles\nThe component's behavior is controlled by props passed from a parent component:\n*   **`ReviewFiltersComponent`**: The main functional component that renders the filter UI.\n*   **`filters` (prop)**: An object containing the current state of the selected filters (e.g., `{ teacher: '...', course: '...', min_rating: '...' }`). The component uses this to display the currently selected values in the dropdowns.\n*   **`onFilterChange` (prop)**: A callback function that is triggered whenever a user changes a value in a dropdown. It informs the parent component which filter field was changed and its new value, allowing the parent to update the state.\n*   **`onApply` (prop)**: A callback function that is triggered when the user clicks the \"筛选\" (Filter) button. It signals the parent component to execute the actual filtering logic (e.g., fetch new data from an API).\n\n### 3. Important Features or Capabilities\n*   **Controlled Component**: The component does not manage its own state. It is a \"presentational\" or \"dumb\" component that receives its values and behavior entirely through props, making it reusable and easy to integrate.\n*   **Responsive UI**: It uses Material-UI's `Grid` system (`xs={12} md={...}`), allowing the layout to adapt from a single column on small screens to a horizontal row on larger screens.\n*   **Specific Filter Criteria**: It provides three distinct filter options:\n    *   **Teacher**: A dropdown to select a specific teacher. (Note: A comment indicates this list is intended to be loaded dynamically).\n    *   **Course**: A dropdown with a hardcoded list of courses.\n    *   **Minimum Rating**: A dropdown to filter reviews by a minimum star rating.\n*   **User-Friendly Interface**: It uses standard Material-UI components like `Select` and `Button`, along with an icon (`SearchIcon`), for a clean and intuitive user experience. The labels are in Chinese.",
  "frontend/src/hooks/useTeacherManagement.ts": "Of course. Here is a concise analysis of the provided script:\n\n### 1. Main Purpose and Functionality\nThis script defines a custom React hook named `useTeacherManagement`. Its primary purpose is to encapsulate all the logic and state required for managing teacher data within a component. It provides a complete solution for CRUD (Create, Read, Update, Delete) operations, abstracting away the direct API calls and state management complexity from the UI component that uses it.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`loadTeachers()`**: Fetches the list of teachers from the API and updates the component's state. It also manages the loading state.\n*   **`handleOpenTeacherDialog(teacher?)`**: Opens a modal or dialog for creating or editing a teacher. If a `teacher` object is provided, it fetches their full details and populates the form for editing; otherwise, it prepares a blank form for creation.\n*   **`handleTeacherSubmit()`**: Handles the form submission. It intelligently determines whether to call the API to create a new teacher or update an existing one based on the `editingTeacher` state. It constructs a `FormData` object to support image uploads.\n*   **`handleTeacherDelete(id, name)`**: Deletes a teacher after receiving user confirmation via a `window.confirm` dialog.\n*   **`handleTeacherInputChange()` & `handleImageChange()`**: Manage the state of the teacher form, updating text inputs and handling the selection and validation of an image file.\n*   **`handleCloseTeacherDialog()`**: Closes the form dialog and resets related state.\n\n### 3. Important Features or Capabilities\n*   **Complete CRUD Logic**: Provides all necessary functions to create, read, update, and delete teacher records.\n*   **State Encapsulation**: Manages all related state (teacher list, loading status, dialog visibility, form data) within the hook, simplifying the component that uses it.\n*   **Image Upload Support**: Uses the `FormData` API to handle file uploads, allowing for a teacher's profile image to be created or updated along with their other data.\n*   **Robust Error Handling**: Implements `try...catch` blocks for all API calls and uses a `showSnackbar` function (passed as a prop) to display user-friendly success or error notifications. The submit handler includes logic to parse specific error messages from the API response.\n*   **Client-Side Validation**: Performs basic validation before submission, such as checking for a non-empty name and validating the image file's type and size.",
  "frontend/src/components/admin/reviews/ReviewManagement.tsx": "Based on the script analysis, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThis is a React component named `ReviewManagement` that serves as the main user interface for managing a list of reviews. It acts as a \"container\" component, assembling several smaller, specialized child components to create a complete review management dashboard. Its primary function is to display reviews, allow users to filter them, and perform actions like viewing details or deleting a review.\n\n### 2. Key Functions/Methods and Their Roles\nThe component's logic is handled by a custom hook (`useReviewManagement`), which provides the following key functions as props:\n*   **`handleViewReview`**: Triggered when a user wants to see the details of a review, likely opening a dialog with the selected review's content.\n*   **`handleDeleteReview`**: Called to initiate the deletion of a specific review from the list.\n*   **`handleReviewFilterChange`**: Updates the filter state as a user interacts with filter inputs (e.g., typing in a search box).\n*   **`applyReviewFilters`**: Executes the filtering logic to update the displayed list of reviews based on the selected criteria.\n*   **`handleCloseReviewDialog`**: Closes the dialog box that shows review details.\n\n### 3. Important Features or Capabilities\n*   **Modular Design:** The UI is built from distinct child components (`ReviewStats`, `ReviewFilters`, `ReviewList`, `ReviewDialog`), making the code organized and maintainable.\n*   **Separation of Concerns:** It cleanly separates the UI (view) from the application logic and state, which are managed by the external `useReviewManagement` hook. This is a robust and modern React pattern.\n*   **Interactive Filtering:** It includes a dedicated section for filtering reviews, allowing users to narrow down the list based on specific criteria.\n*   **Asynchronous State Handling:** It displays a loading spinner (`CircularProgress`) while reviews are being fetched, providing clear feedback to the user during data loading.\n*   **Modal Detail View:** It uses a dialog (`ReviewDialog`) to display the full details of a single review without navigating away from the main list, improving user experience.",
  "frontend/src/pages/AdminPage.tsx": "Based on the analysis of the script, here is a concise summary:\n\n### 1. Main Purpose and Functionality\nThe main purpose of this script is to define the entry-point component for an application's **admin panel page**.\n\nFunctionally, this component is a simple wrapper. It doesn't contain any complex logic or UI itself; its sole responsibility is to render the `AdminLayout` component, which presumably contains the actual structure, navigation, and content of the admin dashboard. The script's comments emphasize that this is a complete refactor of a previous, massive 1600-line component, designed to improve the codebase.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`AdminPage` (React Functional Component):** This is the only component defined in the file. Its role is to act as a container that renders the main layout for the admin section.\n*   **`import AdminLayout from ...`:** This import is crucial. It brings in the `AdminLayout` component, to which `AdminPage` delegates all responsibility for rendering the user interface.\n\n### 3. Important Features or Capabilities\nThe script's primary feature is its **architectural design**, as highlighted in the comments:\n*   **Modularity:** It replaces a monolithic file with a modular approach, separating the page's entry point (`AdminPage`) from its layout (`AdminLayout`).\n*   **Type Safety:** It is written in TypeScript (`React.FC`), which helps prevent common errors and improves code reliability.\n*   **Maintainability & Scalability:** The new structure, based on separation of concerns and reusable components, is explicitly designed to be easier to maintain, debug, and extend in the future.",
  "frontend/src/pages/AddReviewPage.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n### Summary of the `AddReviewPage` Script\n\nThis script defines a React functional component named `AddReviewPage` that allows users to create and submit a review for a specific teacher.\n\n#### 1. Main Purpose and Functionality\nThe primary purpose of this component is to provide a user interface for adding a new review for a teacher.\n\nIts core functionality includes:\n*   Fetching and displaying the information of the teacher being reviewed, identified by an ID from the URL.\n*   Presenting a comprehensive form to collect review details.\n*   Validating the user's input before submission.\n*   Submitting the completed review data to a backend API.\n*   Redirecting the user to the teacher's profile page upon successful submission, providing feedback.\n*   Handling loading and error states to ensure a smooth user experience.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`useEffect` & `loadTeacher()`**: On component mount, this hook calls `loadTeacher`, which asynchronously fetches the specific teacher's data from the `teachersApi` and updates the component's state.\n*   **`handleInputChange()`**: A generic handler to update the `formData` state whenever a user interacts with a form field (like text inputs, ratings, or selectors).\n*   **Tag Management (`handleTagToggle`, `handleAddCustomTag`, `handleRemoveTag`)**: A set of functions dedicated to managing the review's tags. Users can select from a list of common tags or add, validate, and remove their own custom tags.\n*   **`validateForm()`**: Performs client-side validation to ensure required fields (like review content and course selection) are filled out correctly before attempting to submit the form.\n*   **`handleSubmit()`**: The main submission function. It prevents the default form behavior, runs validation, formats the data for the API (e.g., joins tags into a string, creates a title), sends it to the `reviewsApi`, and handles the navigation and state changes for success or failure.\n\n#### 3. Important Features or Capabilities\n*   **Dynamic Data Loading**: The component is dynamic, loading teacher details based on the `id` parameter in the page's URL.\n*   **Rich User Interface**: It leverages the Material-UI library to create a modern and intuitive form with specialized inputs like `Rating` for star-based scores, `Switch` for boolean choices, and `Chip` for an interactive tagging system.\n*   **Comprehensive Tagging System**: A key feature is the ability for users to select from pre-defined \"common tags\" or create their own custom tags, providing structured and descriptive feedback.\n*   **Robust State Management**: The component effectively uses React state (`loading`, `submitting`, `error`) to provide clear visual feedback to the user, such as displaying a loading spinner, showing error alerts, and disabling buttons during submission.\n*   **API Integration**: It cleanly separates UI logic from data-fetching logic by interacting with dedicated API services (`teachersApi`, `reviewsApi`).",
  "frontend/src/pages/TeachersPage.tsx": "Of course. Here is a concise analysis of the provided React script.\n\n***\n\n### Summary of the Script\n\nThis script is a React functional component named `TeachersPage` that creates a dynamic and interactive \"Teacher List\" page for a web application. It uses the Material-UI library for its user interface.\n\n#### 1. Main Purpose and Functionality\nThe primary purpose of this component is to fetch a list of teachers from a backend API, display them in a user-friendly format, and provide tools for users to search, filter, and sort the list. The results are presented in a paginated grid of cards, and each card links to a detailed page for that specific teacher.\n\n#### 2. Key Functions/Methods and Their Roles\n*   **`TeachersPage` (Component):** The main component that manages all state (teachers list, loading status, filters, pagination) and renders the UI.\n*   **`loadTeachers()`:** An asynchronous function that makes an API call to fetch teacher data. It uses the current state of `filters` and `pagination` to construct the request, handles the loading state, and updates the component with the fetched data.\n*   **`handleFilterChange()` & `handlePageChange()`:** Event handlers that update the component's state in response to user actions (e.g., typing in the search bar, selecting a filter, or changing the page). These state changes trigger a `useEffect` hook, which in turn calls `loadTeachers()` to refresh the data.\n*   **`renderRatingStars()`:** A helper function that takes a numerical rating and returns a visual representation of star icons (e.g., 4.5 stars), enhancing the user interface.\n\n#### 3. Important Features or Capabilities\n*   **Dynamic Filtering & Sorting:** Users can search for teachers by name/course, filter by minimum rating, and sort by rating, number of reviews, or name.\n*   **API-Driven Content:** The page is not static; it fetches its data from an external API (`teachersApi`), ensuring the information is up-to-date.\n*   **Pagination:** Efficiently handles large datasets by displaying a limited number of teachers per page and allowing users to navigate between pages.\n*   **Rich UI & UX:** Employs Material-UI to create a modern interface with informative teacher cards that display an avatar, name, rating, review count, and subject tags. It also includes user-friendly features like a loading spinner and a \"no results found\" message with a reset button.\n*   **Client-Side Routing:** Integrates with `react-router-dom` to link each teacher card to a more detailed view (`/teachers/:id`), which is typical in a Single-Page Application (SPA).",
  "frontend/src/pages/TeacherDetailPage.tsx": "Of course. Here is a concise analysis of the provided React script:\n\n### 1. Main Purpose and Functionality\n\nThe script defines a React component, `TeacherDetailPage`, which functions as a detailed profile page for a specific teacher within a web application. Its primary purpose is to fetch and display comprehensive information about a teacher, identified by an ID from the URL. This includes the teacher's personal details, aggregated ratings, and a list of student reviews. The page is designed to be a central hub for students to evaluate and learn about a teacher.\n\n### 2. Key Functions/Methods and Their Roles\n\n*   **`TeacherDetailPage` (Component):** The main React functional component that manages the page's state (teacher data, reviews, loading status) and renders the entire UI using Material-UI components.\n*   **`useEffect` (Hook):** Triggers the data fetching process (`loadTeacherData`) when the component first loads or when the teacher `id` in the URL changes.\n*   **`loadTeacherData`:** An asynchronous function that concurrently fetches the specific teacher's data and all associated reviews from two different API endpoints (`teachersApi` and `reviewsApi`). It handles loading states and potential errors.\n*   **`handleMarkHelpful`:** An event handler for the \"Helpful\" button on a review. It calls an API to mark a review as helpful and then re-fetches the reviews to update the helpful count on the UI.\n*   **`getRatingDistribution`:** A utility function that processes the list of reviews to calculate the count for each star rating (1 to 5). This data is used to render the rating distribution bar chart.\n\n### 3. Important Features or Capabilities\n\n*   **Dynamic Data Loading:** The page is dynamic, fetching data based on the `:id` parameter in the URL, making it a reusable template for any teacher.\n*   **Comprehensive Data Display:** It presents a rich set of information, including:\n    *   Basic profile (avatar, name, department).\n    *   Aggregated statistics (overall rating, difficulty score, \"would take again\" percentage).\n    *   A visual rating distribution chart.\n    *   A detailed list of individual student reviews with content, tags, and course context.\n*   **User Interactivity:**\n    *   Provides a prominent \"Write a Review\" button that links to a form for submitting a new review.\n    *   Allows users to \"like\" or mark reviews as helpful, providing a feedback mechanism on the quality of the reviews themselves.\n*   **Robust UI/UX:**\n    *   Built with Material-UI for a modern and responsive design.\n    *   Includes loading indicators (`CircularProgress`) to provide feedback during data fetching.\n    *   Gracefully handles edge cases, such as when a teacher is not found or when there are no reviews, displaying informative messages and calls-to-action.\n    *   The layout uses a sticky side-card for the teacher's summary, keeping it visible while scrolling through reviews.",
  "frontend/src/pages/HomePage.tsx": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\nThis script defines the `HomePage` component for a **Teacher Review System** web application, specifically for a joint program between Chengdu University of Technology (CDUT) and Oxford Brookes University (OBU).\n\nIts primary function is to serve as the main landing page, providing a high-level overview of the platform by:\n*   Displaying a welcome banner with university logos.\n*   Presenting key statistics (total teachers, reviews, and departments).\n*   Showcasing a list of the top-rated teachers to encourage user engagement and exploration.\n\n### 2. Key Functions/Methods and Their Roles\n*   **`HomePage` (React Component):** The main component that renders the entire page UI. It manages the page's state, including loading status, statistics, and the list of top teachers.\n*   **`useEffect` Hook:** This hook is used to call the `loadData` function once when the component is first mounted, initiating the data fetching process.\n*   **`loadData` (Async Function):** This is the core data-handling function. It:\n    *   Sets a loading state to show a progress spinner.\n    *   Uses `Promise.all` to efficiently fetch two sets of data in parallel from an external API (`teachersApi`):\n        1.  Overall system statistics (`getTeacherStats`).\n        2.  The top 8 highest-rated teachers (`getTeachers`).\n    *   Updates the component's state with the fetched data.\n    *   Resets the loading state after the data is loaded or an error occurs.\n\n### 3. Important Features or Capabilities\n*   **Asynchronous Data Fetching:** The page loads its content dynamically from an API, displaying a loading indicator to the user for a better experience.\n*   **Dashboard View:** It presents key metrics in visually distinct cards, offering a quick statistical snapshot of the platform's content.\n*   **Dynamic \"Top Teachers\" List:** Instead of a static list, it fetches and displays teachers based on their current average rating, ensuring the content is always relevant and up-to-date.\n*   **Interactive and Navigable UI:** The component uses Material-UI for a modern look and feel. Teacher cards are interactive, with hover effects, and function as links (`react-router-dom`) that navigate users to detailed teacher profile pages.\n*   **Efficient Loading:** By using `Promise.all`, it fetches necessary data concurrently rather than sequentially, which helps improve the page's initial load time.",
  "frontend/src/services/api.ts": "Of course. Here is a concise analysis of the provided script:\n\n### Summary of the API Client Script\n\n#### 1. Main Purpose and Functionality\nThis script is a centralized API client module built with Axios for a web application, likely a teacher review platform. Its primary purpose is to abstract and organize all HTTP requests to a backend server. It handles data management for four main domains: authentication, teachers, reviews, and users.\n\n#### 2. Key Functions/Methods and Their Roles\nThe script is logically divided into several exported objects, each managing a specific API resource:\n\n*   **Axios Instance & Interceptors:**\n    *   An `api` instance is created with a base URL (`/api`) and default headers.\n    *   A **request interceptor** automatically attaches the JWT `accessToken` from `localStorage` to every outgoing request for authentication.\n    *   A **response interceptor** simplifies promise handling by returning the `response.data` directly and provides centralized logging for API errors.\n\n*   **`authApi`:** Manages user authentication, including separate login methods for students and admins (`studentLogin`, `adminLogin`), fetching the current user's profile (`getCurrentUser`), logging out, and refreshing authentication tokens.\n\n*   **`teachersApi`:** Handles all CRUD (Create, Read, Update, Delete) operations for teacher data. It includes functions for listing/getting teachers, fetching statistics, and admin-only functions for creating, updating, and deleting teacher profiles.\n\n*   **`reviewsApi`:** Manages user-submitted reviews. It provides functions to list reviews (with separate endpoints for public and admin views), create a new review, mark a review as helpful, and get review statistics. Admin-only functions for deleting reviews are also included.\n\n*   **`usersApi`:** Provides admin-level functionality for managing users, including full CRUD operations and fetching user statistics.\n\n#### 3. Important Features or Capabilities\n*   **Centralized Configuration:** All API calls originate from a single, pre-configured Axios instance, ensuring consistency in base URL, headers, and timeouts.\n*   **Automatic Authentication:** The request interceptor seamlessly handles JWT token injection, so individual API calls don't need to manage authorization headers manually.\n*   **Role-Based Endpoints:** The API design clearly distinguishes between general user actions (e.g., creating a review) and admin-specific tasks (e.g., deleting a teacher or managing users).\n*   **File Upload Support:** The `teachersApi` uses `multipart/form-data` for creating and updating teachers, indicating it supports file uploads (likely for profile pictures).\n*   **Structured Error Handling:** Includes a global error handler in the response interceptor and a utility function (`handleApiError`) to extract user-friendly error messages.",
  "backend/requirements.txt": "This is not a script, but a list of Python package dependencies, likely from a `requirements.txt` file for a Django project. Here is an analysis based on these dependencies:\n\n### 1. Main Purpose and Functionality\nThe project is a **backend web service** built using the **Django** framework. Its primary function is to provide a **RESTful API** for a client application (like a web frontend or mobile app). The service is designed to connect to a **MySQL database** for data storage and retrieval.\n\n### 2. Key Packages and Their Roles\n*   **Django:** The core web framework that provides the fundamental structure, including the ORM (for database interaction), URL routing, and server logic.\n*   **Django REST Framework (DRF):** A powerful toolkit for building the web API on top of Django. It handles serializing data (converting database models to JSON), request/response logic, and API views.\n*   **djangorestframework-simplejwt:** Implements user authentication using **JSON Web Tokens (JWT)**. This provides a secure, stateless way for users to log in and access protected API endpoints.\n*   **PyMySQL:** The database driver that allows Django to communicate with a **MySQL** database.\n*   **django-cors-headers:** Manages Cross-Origin Resource Sharing (CORS) headers. This is crucial for allowing a web browser-based frontend, served from a different domain, to make requests to this API.\n\n### 3. Important Features or Capabilities\n*   **Stateless JWT Authentication:** The API is secured using a modern, token-based authentication system rather than traditional sessions.\n*   **Advanced API Filtering:** The `django-filter` library enables powerful and flexible filtering of API results directly through URL parameters (e.g., `api/products?category=electronics`).\n*   **Image Processing:** `Pillow` is included, indicating the application can handle image uploads, processing, and serving (e.g., for user profiles or product images).\n*   **Secure Configuration:** `python-decouple` suggests the project follows best practices by separating sensitive settings (like database passwords and secret keys) from the source code.",
  "frontend/src/pages/LoginPage.tsx": "Based on the script provided, here is a concise analysis:\n\n### 1. Main Purpose and Functionality\n\nThe script defines a sophisticated **Login Page** component for a web application called \"CDUT-OBU 教师评价系统\" (CDUT-OBU Teacher Evaluation System). Its primary purpose is to authenticate two distinct types of users: **Students** and **Administrators**.\n\nFunctionally, it:\n*   Presents a tabbed interface to switch between student and admin login forms.\n*   Handles user input for credentials (username/password).\n*   Communicates with a backend API (`authApi`) to validate the credentials.\n*   Upon successful login, it saves authentication tokens and user information to `localStorage` for session persistence.\n*   Redirects logged-in users to their respective dashboards (`/` for students, `/admin` for admins).\n*   Automatically redirects users who are already logged in, bypassing the login screen.\n*   Displays a unique, narrative-driven \"Welcome\" dialog after a user's first successful login.\n\n### 2. Key Functions/Methods and Their Roles\n\n*   **`LoginPage` (React.FC):** The main functional component that orchestrates the entire page's state, logic, and rendering.\n*   **`TabPanel`:** A helper component used to display the content of the active tab (either the student or admin form) while hiding the other.\n*   **`useEffect` Hook:** Runs on component mount to check `localStorage` for an existing session. If a user is already logged in, it immediately redirects them to the appropriate page.\n*   **`useState` Hooks:** Manage the component's state, including the active tab (`tabValue`), form data (`studentForm`, `adminForm`), loading status (`loading`), error messages (`error`), and password visibility (`showPassword`).\n*   **`useMemo` Hooks:** Used for performance optimization. They pre-calculate and cache the random properties for the animated background elements (`floatingWordsConfig`, `connectionLinesConfig`) so they don't change on every re-render, creating a smooth, non-jarring visual effect.\n*   **`handleStudentLogin` / `handleAdminLogin`:** Asynchronous functions that handle the form submission logic. They call the respective API endpoints, manage loading and error states, and on success, store session data and trigger the welcome dialog.\n*   **`handleCloseWelcomeDialog`:** Hides the welcome dialog and executes the final redirection to the user's dashboard.\n\n### 3. Important Features or Capabilities\n\n*   **Dual-Role Authentication:** The component is clearly structured to handle two different user roles with separate UI and logic paths within a single page.\n*   **Rich Animated Background:** A standout feature is the visually complex and dynamic background, composed of animated \"floating words\" and \"connection lines.\" This creates a modern, tech-inspired aesthetic and is optimized for performance with `useMemo`.\n*   **Narrative-Driven Onboarding:** Instead of a simple redirect, the application displays a full-screen welcome dialog after login. This dialog contains a personal message explaining the motivation and purpose behind the application, aiming to build a sense of community and shared purpose.\n*   **Modern UI/UX:** Built with Material-UI, the page includes user-friendly features like a password visibility toggle, clear visual feedback for loading and error states, and a polished, professional design.\n*   **Session Persistence:** By using `localStorage`, the application remembers the user's login state across browser sessions, providing a seamless experience for returning users."
}